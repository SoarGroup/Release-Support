% ----------------------------------------------------------------------------
\typeout{--------------- The Soar User INTERFACE -----------------------------}
\chapter{The Soar User Interface}
\label{INTERFACE}
\index{interface}
%\index{user interface}
%\index{function definitions}

\nocomment{for each command, use the 'funsum' command with a brief
	description. This writes to the manual.glo file which can be edited
	into the funtion summary and index (see that file for more
	instructions). This is a bit tedious, but the reason I've set it up
	this way is that the command set is in flux right now -- this lessens
	the chance that a command will be inadvertently omitted from the
	function summary (or that a defunct command will be inadvertently
	included). 
	}

\nocomment{\begin{figure}[h]
\psfig{figure=dilbert-living.ps,height=2.2in} \vspace{12pt}
\end{figure}
}
% ----------------------------------------------------------------------------


This chapter describes the set of user interface commands for Soar. All commands and examples are presented as 
if they are being entered at the Soar command prompt.

This chapter is organized into 7 sections:
\begin{enumerate}
\item Basic Commands for Running Soar
\item Examining Memory
\item Configuring Trace Information and Debugging
\item Configuring Soar's Run-Time Parameters
\item File System I/O Commands
\item Soar I/O commands
\item Miscellaneous Commands
\end{enumerate}

Each section begins with a summary description of the commands covered
in that section, including the role of the command and its importance
to the user.  Command syntax and usage are then described fully, in
alphabetical order.

The following pages were automatically generated from the wiki version
at

\hspace{2em}\soar{\htmladdnormallink{http://code.google.com/p/soar/wiki/CommandIndex}{http://code.google.com/p/soar/wiki/CommandIndex}}


on the date listed on the title page of this manual.  Please consult
the wiki directly for the most accurate and up-to-date information.

For a concise overview of the Soar interface functions, see the Function
Summary and Index on page \pageref{func-sum}. This index is intended to be a
quick reference into the commands described in this chapter.

\subsubsection*{Notation}

\nocomment{check for all commands that I've got the notation current}

The notation used to denote the syntax for each user-interface command follows
some general conventions:\vspace{-12pt}
\begin{itemize}
\item The command name itself is given in a \soarb{bold} font.\vspace{-8pt}
\item Optional command arguments are enclosed within square brackets,
	\soar{[} and \soar{]}.\vspace{-8pt}
\item A vertical bar, \soar{|}, separates alternatives.\vspace{-8pt}
\item Curly braces, \soar{\{\}}, are used to group arguments when at least
one argument from the set is required.
\item The commandline prompt that is printed by Soar, is normally
the agent name, followed by '\soar{>}'.  In the examples in this manual, 
we use ``\soar{soar>}''.
\item Comments in the examples are preceded by
a '\soar{\#}', and in-line comments are preceded by '\soar{;\#}'.
\end{itemize}

For many commands, there is some flexibility in the order in which the
arguments may be given. (See the online help for each command for more
information.)  We have not incorporated this flexible ordering into the syntax
specified for each command because doing so complicates the specification of
the command.  When the order of arguments will affect the output
produced by a command, the reader will be alerted.

% ----------------------------------------------------------------------------
\section{Basic Commands for Running Soar}
\label{BASIC}

This section describes the commands used to start, run and stop a Soar 
program; to invoke on-line help information; and to create and 
delete Soar productions.  The specific commands described in this
section are:

\paragraph{Summary}
\begin{quote}
\begin{description}
%\item[d] - Run the Soar program for one decision cycle.
%\item[e] - Run the Soar program for one elaboration cycle.
\item[excise] - Delete Soar productions from production memory.
%\item[exit] - Terminate Soar and return to the operating system.
\item[gp] - Define a pattern used to generate and source a set of Soar productions.
\item[gp-max] - Set the upper-limit to the number of productions generated by the gp command.
\item[help] - Provide formatted, on-line information about Soar commands.
\item[init-soar] - Reinitialize Soar so a program can be rerun from scratch.
\item[run] - Begin Soar's execution cycle.
\item[sp] - Create a production and add it to production memory.
\item[stop-soar] - Interrupt a running Soar program.
\end{description}
\end{quote}
These commands are all frequently used anytime Soar is run.

\input{wikicmd/tex/excise}
\input{wikicmd/tex/gp}
\input{wikicmd/tex/gp-max}
\input{wikicmd/tex/help}
\input{wikicmd/tex/init-soar}
\input{wikicmd/tex/run}
\input{wikicmd/tex/sp}
\input{wikicmd/tex/stop-soar}

\section{Examining Memory}
\label{MEMORY}

This section describes the commands used to inspect production memory,
working memory, and preference memory; to see what productions will 
match and fire in the next Propose or Apply phase;  and to examine the 
goal dependency set.  These commands are particularly useful when
running or debugging Soar, as they let users see what Soar is ``thinking.''
The specific commands described in this section are:

\paragraph{Summary}
\begin{quote}
\begin{description}
\item[default-wme-depth] - Set the level of detail used to print WMEs.
\item[gds-print] - Print the WMEs in the goal dependency set for each goal.
\item[internal-symbols] - Print information about the Soar symbol table.
\item[matches] - Print information about the match set and partial matches.
\item[memories] - Print memory usage for production matches.
\item[preferences] - Examine items in preference memory.
\item[print] - Print items in working memory or production memory.
\item[production-find] - Find productions that contain a given pattern.
%\item[wmes] - An alias for the print command; prints items in working memory.
\end{description}
\end{quote}

Of these commands, \textbf{print} is the most often used (and the most
complex) followed by \textbf{matches} and \textbf{memories}.  \textbf{preferences}
is used to examine which candidate operators have been proposed.
\textbf{production-find} is especially useful when the number of
productions loaded is high.  \textbf{gds-print}
is useful for examining the goal dependecy set when subgoals seem to
be disappearing unexpectedly.  \textbf{default-wme-depth} is related to the \textbf{print} command.
\textbf{internal-symbols} is not often used but is helpful when debugging Soar extensions or
trying to locate memory leaks.

\input{wikicmd/tex/default-wme-depth}
\input{wikicmd/tex/gds-print}
\input{wikicmd/tex/internal-symbols}
\input{wikicmd/tex/matches}
\input{wikicmd/tex/memories}
\input{wikicmd/tex/preferences}
\input{wikicmd/tex/print}
\input{wikicmd/tex/production-find}

% ****************************************************************************
% ----------------------------------------------------------------------------
\section{Configuring Trace Information and Debugging}
\label{DEBUG}

This section describes the commands used primarily for debugging or
to configure the trace output printed by Soar as it runs.  Users may:
specify the content of the runtime trace output; ask that
they be alerted when specific productions fire and retract; 
or request details on Soar's performance.

The specific commands described in this section are:


\paragraph{Summary}
\begin{quote}
\begin{description}
\item[chunk-name-format] - Specify format of the name to use for new chunks.
\item[firing-counts] - Print the number of times productions have fired.
%\item[format-watch] - Change the trace output that's printed as Soar runs.
%\item[interrupt] - Add \& remove pre-firing interrupts on specific productions.
%\item[monitor] - Manage attachment of Tcl scripts to Soar events.
\item[pwatch] - Trace firings and retractions of specific productions.
\item[stats] - Print information on Soar's runtime statistics.
\item[verbose] -  Control detailed information printed as Soar runs.
\item[warnings] - Toggle whether or not warnings are printed.
\item[watch] - Control the information printed as Soar runs.
\item[watch-wmes] -  Print information about wmes that match a certain pattern as they are added and removed
\end{description}
\end{quote}

Of these commands, \soar{watch} is the most often used (and the most 
complex). \soar{pwatch} is related to \soar{watch}, but applies only 
to specific, named productions. \soar{firing-counts} and \soar{stats} 
are useful for understanding how much work Soar is doing. \soar{chunk-name-format} is less-frequently
used, but allows for detailed control of Soar's chunk naming.

\input{wikicmd/tex/chunk-name-format}
\input{wikicmd/tex/firing-counts}
\input{wikicmd/tex/pwatch}
\input{wikicmd/tex/stats}
\input{wikicmd/tex/verbose}
\input{wikicmd/tex/warnings}
\input{wikicmd/tex/watch}
\input{wikicmd/tex/watch-wmes}

% ----------------------------------------------------------------------------
\section{Configuring Soar's Runtime Parameters}
\label{RUNTIME}

This section describes the commands that control Soar's Runtime Parameters.
Many of these commands provide options that simplify or restrict 
runtime behavior to enable easier and more localized debugging.
Others allow users to select alternative algorithms or methodologies.
Users can configure Soar's learning mechanism; examine the
backtracing information that supports chunks and justifications;
provide hints that could improve the efficiency of the Rete matcher;
limit runaway chunking and production firing;
choose an alternative algorithm for determining whether a working memory
element receives O-support;  and 
configure options for selecting between mutually indifferent operators.

The specific commands described in this section are:

\paragraph{Summary}
\begin{quote}
\begin{description}
\item[epmem] - Get/Set episodic memory parameters and statistics
\item[explain-backtraces] - Print information about chunk and justification backtraces.
\item[indifferent-selection] -  Controls indifferent preference arbitration.
\item[learn] - Set the parameters for chunking, Soar's learning mechanism.
\item[max-chunks] - Limit the number of chunks created during a decision cycle.
\item[max-dc-time] - Set a wall-clock time limit such that the agent will be interrupted when a single decision cycle exceeds this limit.
\item[max-elaborations] - Limit the maximum number of elaboration cycles in a given phase.
\item[max-goal-depth] - Limit the sub-state stack depth.
\item[max-memory-usage] - Set the number of bytes that when exceeded by an agent, will trigger the memory usage exceeded event. 
\item[max-nil-output-cycles] - Limit the maximum number of decision cycles executed without producing output. 
\item[multi-attributes] - Declare multi-attributes so as to increase Rete matching efficiency.
\item[numeric-indifferent-mode] - Select method for combining numeric preferences.
\item[o-support-mode] - Choose experimental variations of o-support.
\item[predict] - Predict the next selected operator 
\item[rl] - Get/Set RL parameters and statistics 
\item[save-backtraces] - Save trace information to explain chunks and justifications.
\item[select] - Force the next selected operator 
\item[set-stop-phase] -  Controls the phase where agents stop when running by decision.
\item[smem] - Get/Set semantic memory parameters and statistics
\item[timers] - Toggle on or off the internal timers used to profile Soar.
\item[waitsnc] - Generate a wait state rather than a state-no-change impasse.
\item[wma] - Get/Set working memory activation parameters
\end{description}
\end{quote}

% ----------------------------------------------------------------------------
\input{wikicmd/tex/epmem}
\input{wikicmd/tex/explain-backtraces}
\input{wikicmd/tex/indifferent-selection}
\input{wikicmd/tex/learn}
\input{wikicmd/tex/max-chunks}
\input{wikicmd/tex/max-dc-time}
\input{wikicmd/tex/max-elaborations}
\input{wikicmd/tex/max-goal-depth}
\input{wikicmd/tex/max-memory-usage}
\input{wikicmd/tex/max-nil-output-cycles}
\input{wikicmd/tex/multi-attributes}
\input{wikicmd/tex/numeric-indifferent-mode}
\input{wikicmd/tex/o-support-mode}
\input{wikicmd/tex/predict}
\input{wikicmd/tex/rl}
\input{wikicmd/tex/save-backtraces}
\input{wikicmd/tex/select}
\input{wikicmd/tex/set-stop-phase}
\input{wikicmd/tex/smem}
\input{wikicmd/tex/timers}
\input{wikicmd/tex/waitsnc}
\input{wikicmd/tex/wma}

% ----------------------------------------------------------------------------

\section{File System I/O Commands}
\label{FILE-IO}

This section describes commands which interact in one way or another
with operating system input and output, or file I/O.  Users can
save/retrieve information to/from files, redirect the information
printed by Soar as it runs, and save and load the binary representation
of productions.
The specific commands described in this section are:

\paragraph{Summary}
\begin{quote}
\begin{description}
%\item[command-to-file] - Evaluate a command and print its results to a file.
%\item[\emph{directory functions}] - \soar{cd, dirs, popd, pushd, pwd}
\item[cd] - Change directory.
\item[clog] - Record all user-interface input and output to a file. \emph{(was \soar{log})}
\item[command-to-file] - Dump the printed output and results of a command to a file. 
\item[dirs] - List the directory stack.
\item[echo] -  Print a string to the current output device.
\item[ls] - List the contents of the current working directory.
\item[popd] - Pop the current working directory off the stack and change to the next directory on the stack.
\item[pushd] - Push a directory onto the directory stack, changing to it.
\item[pwd] - Print the current working directory.
\item[rete-net] - Save the current Rete net, or restore a previous one.
\item[set-library-location] - Set the top level directory containing demos/help/etc.
%\item[output-strings-destination] - Redirect the Soar output stream.
\item[source] - Load and evaluate the contents of a file.
\end{description}
\end{quote}

The \textbf{source} command is used for nearly every Soar program.  The
directory functions are important to understand so that users can
navigate directories/folders to load/save the files of interest.  
Soar applications that include a graphical interface or other
simulation environment will often require the use of \textbf{echo}  .


\input{wikicmd/tex/cd}
\input{wikicmd/tex/clog}
\input{wikicmd/tex/command-to-file}
\input{wikicmd/tex/dirs}
\input{wikicmd/tex/echo}
\input{wikicmd/tex/ls}
\input{wikicmd/tex/popd}
\input{wikicmd/tex/pushd}
\input{wikicmd/tex/pwd}
\input{wikicmd/tex/rete-net}
\input{wikicmd/tex/set-library-location}
\input{wikicmd/tex/source}

% ***************************************************************************
% ----------------------------------------------------------------------------
\section{Soar I/O Commands}
\label{SOAR-IO}

This section describes the commands used to manage Soar's Input/Output
(I/O) system, which provides a mechanism for allowing Soar to interact 
with external systems, such as a computer game environment or a robot.  

Soar I/O functions make calls to \soar{add-wme} and \soar{remove-wme}
to add and remove elements to the \textbf{io} structure of Soar's working
memory. 
 
The specific commands described in this section are:

\paragraph{Summary}
\begin{quote}
\begin{description}
\item[add-wme] - Manually add an element to working memory.
\item[capture-input] - Store the input wmes in a file for reloading later.
\item[remove-wme] - Manually remove an element from working memory.
\item[replay-input] - Load input wmes for each decision cycle from a file.
\end{description}
\end{quote}

These commands are used mainly  when Soar needs to interact with an
external environment.  Users might take advantage of these commands when
debugging agents, but care should be used in adding and removing wmes this
way as they do not fall under Soar's truth maintenance system.

\input{wikicmd/tex/add-wme}
\input{wikicmd/tex/capture-input}
\input{wikicmd/tex/remove-wme}
\input{wikicmd/tex/replay-input}

% ***************************************************************************
% ----------------------------------------------------------------------------
\section{Miscellaneous}
\label{MISC}


\comment{this section still needs to be rewritten...}

\nocomment{This section describes the commands used to inspect production memory,
working memory, and preference memory; to see what productions will 
match and fire in the next Propose or Apply phase;  and to examine the 
goal dependency set.  These commands are particularly useful when
running or debugging Soar, as they let users see what Soar is ``thinking.''}
The specific commands described in this section are:


\paragraph{Summary}
\begin{quote}
\begin{description}
\item[alias] - Define a new alias, or command, using existing commands and arguments.
\item[allocate] - Allocate additional 32 kilobyte blocks of memory for a specified memory pool without running Soar.
\item[echo-commands] - Set whether or not commands are echoed to other connected debuggers. 
\item[edit-production] - Fire event to Move focus in an open editor to this production.
\item[load-library] - Load a shared library into the local client
\item[port] - Returns the port the kernel instance is listening on.
\item[rand] - Generate a random number.
\item[soarnews] - Prints information about the current release.
\item[srand] -  Seed the random number generator.
\item[time] - Uses a default system clock timer to record the wall time required while executing a command.
\item[unalias] - Remove an existing alias.
\item[version] - Returns version number of Soar kernel.
\end{description}
\end{quote}

\input{wikicmd/tex/alias}
\input{wikicmd/tex/allocate}
\input{wikicmd/tex/echo-commands}
\input{wikicmd/tex/edit-production}
\input{wikicmd/tex/load-library}
\input{wikicmd/tex/port}
\input{wikicmd/tex/rand}
\input{wikicmd/tex/srand}
\input{wikicmd/tex/soarnews}
\input{wikicmd/tex/time}
\input{wikicmd/tex/unalias}
\input{wikicmd/tex/version}
